schema: '2.0'
stages:
  clean_data:
    cmd: python src\data\clean_data.py
    deps:
    - path: data\training
      md5: 7a96cfa2ff8c169761a068447405c17e.dir
      size: 5926077
      nfiles: 3
    - path: src\data\clean_data.py
      md5: 446fefd52294d288399ab790a42b6388
      size: 2633
    params:
      params.yaml:
        data_source.data_folders: data
        data_source.prepared.clean_train: clean_train.csv
        data_source.prepared.folder: prepared
        data_source.training_data_folder.folder: training
        data_source.training_data_folder.train: train.csv
    outs:
    - path: data\prepared
      md5: 15682c488e4b458bdc8b68fb97c82852.dir
      size: 591595
      nfiles: 1
  generate_training_features:
    cmd: python -W ignore src\data\generate_training_features.py
    deps:
    - path: data\prepared
      md5: 15682c488e4b458bdc8b68fb97c82852.dir
      size: 591595
      nfiles: 1
    - path: src\data\generate_training_features.py
      md5: ba02934292b2fb66daa39236f43287e2
      size: 5643
    - path: src\models\feature_eng
      md5: b4f5683dcad9940a56832dae0adc4784.dir
      size: 35665
      nfiles: 7
    params:
      params.yaml:
        data_source.data_folders: data
        data_source.prepared:
          folder: prepared
          clean_train: clean_train.csv
        featurize:
          tfidf:
            random_seed: 2023
            dim_reduction: 1
            var_explained: 0.2
            output:
              folder: feature\tfidf
              filename: tfidf.parquet
          count_vector:
            random_seed: 2023
            dim_reduction: 1
            var_explained: 0.9
            output:
              folder: feature\cntvector
              filename: count_vectorizer.parquet
      src/data/train_params.yaml:
        pipeline_type:
          KFoldTE: true
          frequency_encoding: true
          KFold_frequency_encoding: false
          tfidf_vectorizer_encoding: false
          count_vectorizer_encoding: false
        test_data:
          output:
            folder: feature\test
            filename: test_data.parquet
        train_test_split:
          test_size: 0.01
          random_seed: 45
          output_folder: feature\train
        training_data:
          output:
            folder: feature\train
            filename: train_data.parquet
    outs:
    - path: data\feature\
      md5: 840906dea39f03a29b24bced7cc9bb75.dir
      size: 2540850
      nfiles: 2
