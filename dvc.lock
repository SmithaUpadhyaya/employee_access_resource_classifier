schema: '2.0'
stages:
  clean_data:
    cmd: python src\data\clean_data.py
    deps:
    - path: data\training
      md5: 7a96cfa2ff8c169761a068447405c17e.dir
      size: 5926077
      nfiles: 3
    - path: src\data\clean_data.py
      md5: 1bf54ccc4526c5f309e23e21fd890f66
      size: 2320
    params:
      params.yaml:
        data_source.data_folders: data
        data_source.prepared.clean_train: clean_train.csv
        data_source.prepared.folder: prepared
        data_source.training_data_folder.folder: training
        data_source.training_data_folder.train: train.csv
    outs:
    - path: data\prepared
      md5: 2e7cc66824fef408d3cd52a5e2e05d25.dir
      size: 595870
      nfiles: 1
  feature_tfidf_vectorizer:
    cmd: python -W ignore src\data\tfidf_feature_vectorizer.py
    deps:
    - path: data\prepared
      md5: 2e7cc66824fef408d3cd52a5e2e05d25.dir
      size: 595870
      nfiles: 1
    - path: src\data\tfidf_feature_vectorizer.py
      md5: 2bcaa601c813b070aa334093b2235115
      size: 2134
    - path: src\models\feature_eng\TFIDFVectorizerEncoding.py
      md5: b4f7334a522ef5dc14cc8e94783e0d69
      size: 5040
    params:
      params.yaml:
        data_source.data_folders: data
        data_source.prepared.clean_train: clean_train.csv
        data_source.prepared.folder: prepared
        featurize.tfidf:
          random_seed: 2023
          dim_reduction: 1
          output:
            folder: feature\tfidf
            filename: tfidf.parquet
          use_features:
          - RESOURCE
          - RESOURCE_ROLE_CODE
          - RESOURCE_ROLE_DEPTNAME
          - RESOURCE_ROLE_FAMILY
          - RESOURCE_ROLE_FAMILY_DESC
          - RESOURCE_ROLE_ROLLUP_1
          - RESOURCE_ROLE_ROLLUP_2
          - ROLE_CODE
          - ROLE_DEPTNAME
          - ROLE_DEPTNAME_ROLE_CODE
          - ROLE_DEPTNAME_ROLE_FAMILY
          - ROLE_DEPTNAME_ROLE_FAMILY_DESC
          - ROLE_FAMILY
          - ROLE_FAMILY_DESC
          - ROLE_FAMILY_DESC_ROLE_CODE
          - ROLE_FAMILY_DESC_ROLE_FAMILY
          - ROLE_FAMILY_ROLE_CODE
          - ROLE_ROLLUP_1
          - ROLE_ROLLUP_1_ROLE_DEPTNAME
          - ROLE_ROLLUP_1_ROLE_FAMILY
          - ROLE_ROLLUP_1_ROLE_FAMILY_DESC
          - ROLE_ROLLUP_2
          - ROLE_ROLLUP_2_ROLE_CODE
          - ROLE_ROLLUP_2_ROLE_DEPTNAME
          - ROLE_ROLLUP_2_ROLE_FAMILY
          - ROLE_ROLLUP_2_ROLE_FAMILY_DESC
    outs:
    - path: data\feature\tfidf
      md5: dea675a641adff29ed740f2d16f2cdbe.dir
      size: 40900500
      nfiles: 1
  feature_count_vectorizer:
    cmd: python -W ignore src\data\count_feature_vectorizer.py
    deps:
    - path: data\prepared
      md5: 2e7cc66824fef408d3cd52a5e2e05d25.dir
      size: 595870
      nfiles: 1
    - path: src\data\count_feature_vectorizer.py
      md5: 8c169322aeb9e060360aaa1b76bce69d
      size: 2225
    - path: src\models\feature_eng\CountVectorizerEncoding.py
      md5: 64f0802c9018e215624be36c0300ae92
      size: 4865
    params:
      params.yaml:
        data_source.data_folders: data
        data_source.prepared.clean_train: clean_train.csv
        data_source.prepared.folder: prepared
        featurize.count_vector:
          random_seed: 2023
          dim_reduction: 1
          output:
            folder: feature\cntvector
            filename: count_vectorizer.parquet
          use_features:
          - RESOURCE
          - RESOURCE_ROLE_CODE
          - RESOURCE_ROLE_DEPTNAME
          - RESOURCE_ROLE_FAMILY
          - RESOURCE_ROLE_FAMILY_DESC
          - RESOURCE_ROLE_ROLLUP_1
          - RESOURCE_ROLE_ROLLUP_2
          - ROLE_CODE
          - ROLE_DEPTNAME
          - ROLE_DEPTNAME_ROLE_CODE
          - ROLE_DEPTNAME_ROLE_FAMILY
          - ROLE_DEPTNAME_ROLE_FAMILY_DESC
          - ROLE_FAMILY
          - ROLE_FAMILY_DESC
          - ROLE_FAMILY_DESC_ROLE_CODE
          - ROLE_FAMILY_DESC_ROLE_FAMILY
          - ROLE_FAMILY_ROLE_CODE
          - ROLE_ROLLUP_1
          - ROLE_ROLLUP_1_ROLE_DEPTNAME
          - ROLE_ROLLUP_1_ROLE_FAMILY
          - ROLE_ROLLUP_1_ROLE_FAMILY_DESC
          - ROLE_ROLLUP_2
          - ROLE_ROLLUP_2_ROLE_CODE
          - ROLE_ROLLUP_2_ROLE_DEPTNAME
          - ROLE_ROLLUP_2_ROLE_FAMILY
          - ROLE_ROLLUP_2_ROLE_FAMILY_DESC
          - ROLE_ROLLUP_1_ROLE_CODE
          - ROLE_ROLLUP_1_ROLE_ROLLUP_2
    outs:
    - path: data\feature\cntvector
      md5: 8a54848faef4f4844bd96ef0c9479c94.dir
      size: 42033695
      nfiles: 1
